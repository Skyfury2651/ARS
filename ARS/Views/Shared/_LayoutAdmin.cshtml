<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.datatables.net/fixedheader/3.1.8/css/fixedHeader.dataTables.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

</head>
<body>

    <nav class="navbar navbar-light bg-dark">
        <span class="navbar-brand mb-0 h1" style="color: white">Admin</span>
    </nav>
    <div class="container" style="padding-top: 50px">
        @RenderBody()
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.js" crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/fixedheader/3.1.8/js/dataTables.fixedHeader.min.js" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {
            // Setup - add a text input to each footer cell
            const typesList = {
                0: 'Select type',
                1: 'Paypal',
                2: 'Visa',
                3: 'Local Banking',
                4: 'Google Pay'
            };
            const statusList = {
                0: 'Select status',
                1: 'Pending',
                2: 'Success',
                3: 'Cancel'
            };
            $('#example thead tr').clone(true).appendTo('#example thead');
            $('#example thead tr:eq(1) th').each(function (i) {
                var title = $(this).text();
                if (title.toLowerCase() == "type") {
                    var selectOpen = "<select id='type'>";
                    var selectClose = "</select>";
                    for (const [key, value] of Object.entries(typesList)) {
                        var option;
                        if (key == 0) {
                            option = `<option value="${key}" disabled selected> ${value}</option>`;
                        } else {
                            option = `<option value="${key}"> ${value}</option>`;
                        }
                        selectOpen += option;
                    }
                    selectOpen = selectOpen + selectClose;
                    $(this).html(selectOpen);
                } else if (title.toLowerCase() == "status") {
                    var selectOpen = "<select id='status'>";
                    var selectClose = "</select>";
                    for (const [key, value] of Object.entries(statusList)) {
                        if (key == 0) {
                            option = `<option value="${key}" disabled selected> ${value}</option>`;
                        } else {
                            var option = `<option value="${key}"> ${value}</option>`;
                        }
                        selectOpen += option;
                    }
                    selectOpen = selectOpen + selectClose;
                    $(this).html(selectOpen);
                } else {
                    $(this).html('<input type="text" placeholder="Search ' + title + '" />');
                }

                $('input', this).on('keyup change', function () {
                    if (table.column(i).search() !== this.value) {
                        table
                            .column(i)
                            .search(this.value)
                            .draw();
                    }
                });

                $('select', this).on('change', function () {
                    if (table.column(i).search() !== this.value) {
                        if (this.id == "type") {
                            table
                                .column(i)
                                .search(typesList[this.value])
                                .draw();
                        } else {
                            table
                                .column(i)
                                .search(statusList[this.value])
                                .draw();
                        }
                    }
                });
            });


            var table = $('#example').DataTable({
                orderCellsTop: true,
                fixedHeader: true
            });
        });
    </script>
</body>
</html>
