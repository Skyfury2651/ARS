@model IEnumerable<ARS.Models.ApplicationUser>

@{
    ViewBag.Title = "Users List";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<h2>@ViewBag.Title</h2>

<table id="example1" class="display">
    <thead>
        <tr>
            <th scope="col">Full Name</th>
            <th scope="col">Age</th>
            <th scope="col">Sky Miles</th>
            <th scope="col">Email</th>
            <th scope="col">Email Confirmed</th>
            <th hidden></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td style="text-align: center">
                    @Html.DisplayFor(modelItem => item.lastName) @Html.DisplayFor(modelItem => item.firstName)
                </td>
                <td style="text-align: center">
                    @Html.DisplayFor(modelItem => item.age)
                </td>
                <td style="text-align: center">
                    @Html.DisplayFor(modelItem => item.skyMiles) km
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td style="text-align: center">
                    @Html.DisplayFor(modelItem => item.EmailConfirmed)
                </td>
                <td>
                    <!-- Trigger/Open The Modal -->
                    <button type="button" class="btn myBtn btn-lg" data-toggle="modal" data-target="#myModal" style="font-size: 13px"
                            data-id="@item.Id" data-full-name="@item.lastName @item.firstName" data-age="@item.age" data-sex="@item.sex" 
                            data-address="@item.address" data-email="@item.Email" data-phone-number="@item.PhoneNumber"
                            data-sky-miles="@item.skyMiles km" data-identity-code="@item.userIdentityCode" data-user-name="@item.UserName"
                            data-status="@item.status">
                        Detail
                    </button>

                    <!-- Modal -->
                    <div class="modal fade" id="myModal" role="dialog">
                        <div class="modal-dialog">

                            <!-- Modal content-->
                            <div class="modal-content" style="width: inherit">
                                <span class="close" style="padding: 10px">&times;</span>
                                <div class="col-md-12 row">
                                    <div class="col-md-6">
                                        <ul>
                                            <li><strong>ID: </strong><span id="id">@item.Id</span></li>
                                            <li><strong>Full Name: </strong><span id="fullName">@item.lastName @item.firstName</span></li>
                                            <li><strong>Username: </strong><span id="userName">@item.UserName</span></li>
                                            <li><strong>Age: </strong><span id="age">@item.age</span></li>
                                            <li><strong>Sex: </strong><span id="sex">@item.sex</span></li>
                                            <li><strong>Email: </strong><span id="email">@item.Email</span></li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6">
                                        <ul>
                                            <li><strong>Address: </strong><span id="address">@item.address</span></li>
                                            <li><strong>Phone Number: </strong><span id="phoneNumber">@item.PhoneNumber</span> h</li>
                                            <li><strong>Sky Miles: </strong><span id="skyMiles">@item.skyMiles</span>km</li>
                                            <li><strong>identity Code: </strong><span id="identityCode">@item.userIdentityCode</span></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        }
    </tbody>

</table>

@section scripts {
    <script>

        // Get the modal
        var modal = document.getElementById("myModal");

        // Get the button that opens the modal
        var btn = document.getElementsByClassName("myBtn");

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on the button, open the modal
        $(".myBtn").on("click", function () {
            modal.style.display = "block";
            $("#id").text($(this).data("id"));
            $("#fullName").text($(this).data("plane-code"));
            $("#userName").text($(this).data("from"));
            $("#age").text($(this).data("to"));
            $("#sex").text($(this).data("departure-date"));
            $("#email").text($(this).data("arrival-date"));
            $("#address").text($(this).data("flytime"));
            $("#phoneNumber").text($(this).data("price"));
            $("#skyMiles").text($(this).data("distance"));
            $("#identityCode").text($(this).data("havestop"));
        })

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
}